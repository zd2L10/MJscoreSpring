<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>対局記録</title>
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
	<!-- <c:import url="navbar.jsp" />
	<c:import url="parts/commonJs.jsp" /> -->
	<form action="" method="post" id="mj" th:object="${result}">
		<div class="container mt-3">

			<h1 th:text="|対局記録${title}|"></h1>
			<!-- <div class="row mt-5">
			<div class="col-2">
				<h4>局数</h4>
			</div>
			<div class="col-2">
				<select class="form-select">
					<option value="1">東風</option>
					<option value="2">半荘</option>
				</select>
			</div>
		</div> -->
			<div class="row mt-3">
				<div class="col-12 col-sm-3 col-md-2">
				
					<h4>プレイヤー</h4>
				</div>
				<div class="col-9">
				
					<table>

						<th:block th:switch="${derection}">
							<th:block th:case="東家">
							<p class="error" th:errors="*{derection}"></p>
							<p class="error" th:errors="*{deplayer}"></p>
								<tr>
									<th><label for="east">東家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="東家" checked="checked"></td>
									<td><input type="text" th:field="*{eastPlayer}">&nbsp;<span class="error" th:errors="*{eastPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="south">南家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="南家"></td>
									<td><input type="text" th:field="*{southPlayer}">&nbsp;<span class="error" th:errors="*{southPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="west">西家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="西家"></td>
									<td><input type="text" th:field="*{westPlayer}">&nbsp;<span class="error" th:errors="*{westPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="north">北家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="北家"></td>
									<td><input type="text" th:field="*{northPlayer}">&nbsp;<span class="error" th:errors="*{northPlayer}"></span></td>
								</tr>
							</th:block>
							<th:block th:case="南家">
							<p class="error" th:errors="*{derection}"></p>
							<p class="error" th:errors="*{deplayer}"></p>
								<tr>
									<th><label for="east">東家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="東家"></td>
									<td><input type="text" th:field="*{eastPlayer}">&nbsp;<span class="error" th:errors="*{eastPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="south">南家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="南家" checked="checked"></td>
									<td><input type="text" th:field="*{southPlayer}">&nbsp;<span class="error" th:errors="*{southPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="west">西家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="西家"></td>
									<td><input type="text" th:field="*{westPlayer}">&nbsp;<span class="error" th:errors="*{westPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="north">北家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="北家"></td>
									<td><input type="text" th:field="*{northPlayer}">&nbsp;<span class="error" th:errors="*{northPlayer}"></span></td>
								</tr>
							</th:block>
							<th:block th:case="西家">
							<p class="error" th:errors="*{derection}"></p>
							<p class="error" th:errors="*{deplayer}"></p>
								<tr>
									<th><label for="east">東家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="東家"></td>
									<td><input type="text" th:field="*{eastPlayer}">&nbsp;<span class="error" th:errors="*{eastPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="south">南家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="南家"></td>
									<td><input type="text" th:field="*{southPlayer}">&nbsp;<span class="error" th:errors="*{southPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="west">西家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="西家" checked="checked"></td>
									<td><input type="text" th:field="*{westPlayer}">&nbsp;<span class="error" th:errors="*{westPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="north">北家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="北家"></td>
									<td><input type="text" th:field="*{northPlayer}">&nbsp;<span class="error" th:errors="*{northPlayer}"></span></td>
								</tr>
							</th:block>
							<th:block th:case="北家">
							<p class="error" th:errors="*{derection}"></p>
							<p class="error" th:errors="*{deplayer}"></p>
								<tr>
									<th><label for="east">東家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="東家"></td>
									<td><input type="text" th:field="*{eastPlayer}">&nbsp;<span class="error" th:errors="*{eastPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="south">南家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="南家"></td>
									<td><input type="text" th:field="*{southPlayer}">&nbsp;<span class="error" th:errors="*{southPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="west">西家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="西家"></td>
									<td><input type="text" th:field="*{westPlayer}">&nbsp;<span class="error" th:errors="*{westPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="north">北家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="北家" checked="checked"></td>
									<td><input type="text" th:field="*{northPlayer}">&nbsp;<span class="error" th:errors="*{northPlayer}"></span></td>
								</tr>
							</th:block>
							<th:block th:case="*">
							<p class="error" th:errors="*{derection}"></p>
							<p class="error" th:errors="*{deplayer}"></p>
								<tr>
									<th><label for="east">東家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="東家"></td>
									<td><input type="text" th:field="*{eastPlayer}">&nbsp;<span class="error" th:errors="*{eastPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="south">南家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="南家"></td>
									<td><input type="text" th:field="*{southPlayer}">&nbsp;<span class="error" th:errors="*{southPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="west">西家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="西家"></td>
									<td><input type="text" th:field="*{westPlayer}">&nbsp;<span class="error" th:errors="*{westPlayer}"></span></td>
								</tr>
								<tr>
									<th><label for="north">北家</label></th>
									<td><input type="radio" id="derection"
										th:field="*{derection}" value="北家"></td>
									<td><input type="text" th:field="*{northPlayer}">&nbsp;<span class="error" th:errors="*{northPlayer}"></span></td>
								</tr>
							</th:block>

						</th:block>

					</table>
					<input type="hidden" th:field="*{userId}" id="hidden1">
					<input type="hidden" th:field="*{user.loginId}" id="hidden2">
					<input type="hidden" th:field="*{resultId}" id="hidden3">
				</div>
			</div>
			<div class="row mt-3">
				<div class="col-12 col-sm-3 col-md-2">
					<h4>終局点数</h4>
				</div>
				<div class="col-9">
						<p class="error" th:errors="*{ovscore}"></p>
					<table>
						<tr>
							<th>東家</th>
							<td><input type="text" th:field="*{eastScore}"
								th:value="*{eastScore}">点&nbsp;<span class="error" th:errors="*{eastScore}"></span></td>
						</tr>
						<tr>
							<th>南家</th>
							<td><input type="text" th:field="*{southScore}"
								th:value="*{southScore}">点&nbsp;<span class="error" th:errors="*{southScore}"></span></td>
						</tr>
						<tr>
							<th>西家</th>
							<td><input type="text" th:field="*{westScore}"
								th:value="*{westScore}">点&nbsp;<span class="error" th:errors="*{westScore}"></span></td>
						</tr>
						<tr>
							<th>北家</th>
							<td><input type="text" th:field="*{northScore}"
								th:value="*{northScore}">点&nbsp;<span class="error" th:errors="*{northScore}"></span></td>
						</tr>
					</table>
				</div>
			</div>
			<div>
				<p class="mt-3">
					この対局、あなたは <select th:field="*{rank}">
						<th:block th:switch="*{rank}">
							<th:block th:case="1">
								<option value="1" selected>1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
							</th:block>
							<th:block th:case="2">
								<option value="1">1</option>
								<option value="2" selected>2</option>
								<option value="3">3</option>
								<option value="4">4</option>
							</th:block>
							<th:block th:case="3">
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3" selected>3</option>
								<option value="4">4</option>
							</th:block>
							<th:block th:case="4">
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4" selected>4</option>
							</th:block>
							<th:block th:case="*">
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
							</th:block>
						</th:block>
					</select>位です
				</p>
			</div>
			<input type="submit" class="btn btn-primary mt-1 me-5"
				th:value="|${title}する|"> <a class="btn btn-secondary mt-1"
				th:href="@{/result}">一覧に戻る</a>
		</div>
	</form>

	<script>
		var currentId = "";
		var previousId = "";

		function UpdateState() {

		}

		$(document).ready(function() {

			$('input[th:field="*{derection}"]').change(function() {
				const user = $('#hidden2').val();

				$(this).parent().next().children().val(user);
				previousId = currentId;
				currentId = $(this).attr('id');
				$("#" + previousId + "_player").val('');

			});

		});
	</script>


</body>
</html>